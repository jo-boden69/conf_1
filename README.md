# Домашнее задание №3 по конфигурационному управлению
## Сделал студент группы ИКБО-11-23, Сафаров Александр Алексеевич
## Номер варианта: 20
## **Формулировка задачи**
Разработать инструмент командной строки для учебного конфигурационного
языка, синтаксис которого приведен далее. Этот инструмент преобразует текст из
входного формата в выходной. Синтаксические ошибки выявляются с выдачей
сообщений.  
Входной текст на языке xml принимается из стандартного ввода. Выходной
текст на учебном конфигурационном языке попадает в файл, путь к которому
задан ключом командной строки.  
Многострочные комментарии:  
{{!--  
Это многострочный  
комментарий  
--}}  
Словари:  
$[  
имя : значение,  
имя : значение,  
имя : значение,  
...  
]  
Имена:  
[a-zA-Z][a-zA-Z0-9]*  
Значения:  
• Числа.  
• Словари.  
Объявление константы на этапе трансляции:  
(def имя значение)  
Вычисление константного выражения на этапе трансляции (префиксная
форма), пример:  
|+ имя 1|  
Результатом вычисления константного выражения является значение.  
Для константных вычислений определены операции и функции:  
1. Сложение.  
2. Вычитание.  
3. Умножение.  
4. Деление.  
5. mod().  
6. max().  
Все конструкции учебного конфигурационного языка (с учетом их
возможной вложенности) должны быть покрыты тестами. Необходимо показать 3
примера описания конфигураций из разных предметных областей.  
## Описание
Проект написан на языке программирования Python. Ссылка на проект: https://github.com/AleksandrSafarov/CONFIG_HW3
### Запуск программы
1. Склонировать проект
2. Перейти в папку с проектом в терминале
3. Ввести команду
```
python main.py output.txt  input.xml
```
### Запуск юнит тестов
1. Склонировать проект
2. Перейти в папку с проектом в терминале
3. Ввести команду
```
python -m unittest test.py
```

## Описание функций и настроек

### Функции

#### 1. `evaluate_expression(expr, constants)`
Выполняет вычисление арифметического выражения, записанного в префиксной нотации, используя указанные константы.

- **Параметры**:
  - `expr` (str): Строка с арифметическим выражением в префиксной нотации (например, `"+ 2 3"`).
  - `constants` (dict): Словарь констант, где ключ — имя константы, а значение — её численное значение.

- **Возвращает**: 
  - Результат вычисления выражения.

- **Исключения**: 
  - `ValueError`, если выражение некорректно или содержит неизвестную операцию.

#### 2. `parse_xml(input_xml)`
Преобразует строку XML в объект XML-дерева.

- **Параметры**:
  - `input_xml` (str): XML-строка, содержащая данные для преобразования.

- **Возвращает**: 
  - Объект XML-дерева (`ElementTree`), представляющий структуру XML.

- **Исключения**: 
  - `ValueError`, если XML содержит синтаксические ошибки.

#### 3. `xml_to_config(tree)`
Преобразует XML-дерево в текстовую конфигурацию на пользовательском языке, используя константы и вычисляя выражения.

- **Параметры**:
  - `tree` (`ElementTree`): Объект XML-дерева, представляющий структуру исходного XML.

- **Возвращает**:
  - Строка с итоговой конфигурацией, включая комментарии, определения констант, словари и вычисленные значения выражений.

- **Описание**:
  - Парсит элементы XML (например, `comment`, `const`, `dictionary`, `expr`), генерируя соответствующую конфигурацию. При нахождении выражений выполняет их вычисление с помощью `evaluate_expression`.

#### 4. `main()`
Основная функция для обработки командной строки, чтения XML-файла, его разбора и сохранения результата в файл конфигурации.

- **Параметры**:
  - Нет параметров. Функция использует аргументы командной строки, полученные с помощью модуля `argparse`.

- **Описание**:
  - Читает аргументы командной строки для путей входного XML-файла и выходного файла конфигурации. После этого вызывает `parse_xml` для разбора XML и `xml_to_config` для преобразования в текстовую конфигурацию, которую затем записывает в выходной файл.
